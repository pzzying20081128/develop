(function(s,C){function t(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function p(a){return x?x(a):"[object Array]"===y.call(a)}function u(a){return"[object Object]"===y.call(a)}function v(a,b){var d;a=a||{};b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function l(a,b,d){var c=[],e,h;if(!a)return c;if(z&&a.map===z)return a.map(b,d);e=0;for(h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function q(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function A(a){var b=
c.settings.currency.format;"function"===typeof a&&(a=a());return t(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:t(b)?c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var c={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},z=Array.prototype.map,x=Array.isArray,y=Object.prototype.toString,r=c.unformat=
c.parse=function(a,b){if(p(a))return l(a,function(a){return r(a,b)});a=a||0;if("number"===typeof a)return a;b=b||".";var c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(c)?0:c},B=c.toFixed=function(a,b){b=q(b,c.settings.number.precision);var d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},w=c.formatNumber=function(a,b,d,k){if(p(a))return l(a,function(a){return w(a,b,d,k)});a=r(a);var e=v(u(b)?b:{precision:b,
thousand:d,decimal:k},c.settings.number),h=q(e.precision),f=0>a?"-":"",g=parseInt(B(Math.abs(a||0),h),10)+"",n=3<g.length?g.length%3:0;return f+(n?g.substr(0,n)+e.thousand:"")+g.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+B(Math.abs(a),h).split(".")[1]:"")},D=c.formatMoney=function(a,b,d,k,e,h){if(p(a))return l(a,function(a){return D(a,b,d,k,e,h)});a=r(a);var f=v(u(b)?b:{symbol:b,precision:d,thousand:k,decimal:e,format:h},c.settings.currency),g=A(f.format);return(0<a?g.pos:0>
a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",w(Math.abs(a),q(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,k,e,h){if(!a)return[];var f=v(u(b)?b:{symbol:b,precision:d,thousand:k,decimal:e,format:h},c.settings.currency),g=A(f.format),n=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,m=0;a=l(a,function(a,b){if(p(a))return c.formatColumn(a,f);a=r(a);var d=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",w(Math.abs(a),q(f.precision),f.thousand,f.decimal));d.length>
m&&(m=d.length);return d});return l(a,function(a,b){return t(a)&&a.length<m?n?a.replace(f.symbol,f.symbol+Array(m-a.length+1).join(" ")):Array(m-a.length+1).join(" ")+a:a})};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports.accounting=c):"function"===typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(a){return function(){s.accounting=a;c.noConflict=C;return c}}(s.accounting),s.accounting=c)})(this);
